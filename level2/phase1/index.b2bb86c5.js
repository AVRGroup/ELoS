function $parcel$export(e,t,r,o){Object.defineProperty(e,t,{get:r,set:o,enumerable:!0,configurable:!0})}var $parcel$global="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},$parcel$modules={},$parcel$inits={},parcelRequire=$parcel$global.parcelRequiredf3e;null==parcelRequire&&(parcelRequire=function(e){if(e in $parcel$modules)return $parcel$modules[e].exports;if(e in $parcel$inits){var t=$parcel$inits[e];delete $parcel$inits[e];var r={id:e,exports:{}};return $parcel$modules[e]=r,t.call(r.exports,r,r.exports),r.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o},parcelRequire.register=function(e,t){$parcel$inits[e]=t},$parcel$global.parcelRequiredf3e=parcelRequire),parcelRequire.register("dRo73",(function(e,t){var r,o;$parcel$export(e.exports,"register",(()=>r),(e=>r=e)),$parcel$export(e.exports,"resolve",(()=>o),(e=>o=e));var i={};r=function(e){for(var t=Object.keys(e),r=0;r<t.length;r++)i[t[r]]=e[t[r]]},o=function(e){var t=i[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),parcelRequire.register("9MDzx",(function(module,exports){var $4xklQ=parcelRequire("4xklQ"),$6WmIx=parcelRequire("6WmIx"),$9CUYQ=parcelRequire("9CUYQ"),$apQQe=parcelRequire("apQQe"),$4BATD=parcelRequire("4BATD"),$czjZ1=parcelRequire("czjZ1"),$hWrQ2=parcelRequire("hWrQ2");const scene=new $4xklQ.Scene;let extinguisherUses=1;const camera=new $4xklQ.PerspectiveCamera(45,2,1,1e3);camera.position.set(0,15,30);const renderer=new $4xklQ.WebGLRenderer({canvas:document.getElementById("sceneView")});window.addEventListener("resize",(function(){(0,$apQQe.resizeCanvasToDisplaySize)(renderer,camera)}),!1);const ambientLight=new $4xklQ.HemisphereLight("white","darkslategrey",.5),mainLight=new $4xklQ.DirectionalLight("white",.7);mainLight.position.set(2,1,1);const controls=new(0,$6WmIx.OrbitControls)(camera,renderer.domElement),gridMapHelper=new(0,$9CUYQ.GridMapHelper),plane=gridMapHelper.createGridPlane();var actorModelPath=new URL(parcelRequire("8jwWx")).toString();const actor=new $4xklQ.Object3D;(0,$apQQe.loadGLBFile)(actor,actorModelPath,"eve",2),actor.position.set(gridMapHelper.getGlobalXPositionFromCoord(0),1,gridMapHelper.getGlobalZPositionFromCoord(5)),actor.rotateY((0,$apQQe.degreeToRadians)(90));const objective=new $4xklQ.Object3D;var crystalModelPath=new URL(parcelRequire("kgSYq")).toString(),crystalTexturePath=new URL(parcelRequire("d3NFX")).toString();(0,$apQQe.loadOBJFile)(objective,crystalModelPath,"crystal",crystalTexturePath,2),objective.rotateX((0,$apQQe.degreeToRadians)(-90)),objective.position.set(gridMapHelper.getGlobalXPositionFromCoord(9),0,gridMapHelper.getGlobalZPositionFromCoord(5));const boxGeometry=new $4xklQ.BoxGeometry(18,2,2),boxMaterial=new $4xklQ.MeshLambertMaterial({color:"rgb(0,255,0)"}),box1=new $4xklQ.Mesh(boxGeometry,boxMaterial),box2=new $4xklQ.Mesh(boxGeometry,boxMaterial);box1.position.set(gridMapHelper.getGlobalXPositionFromCoord(5),1,gridMapHelper.getGlobalZPositionFromCoord(4)),box2.position.set(gridMapHelper.getGlobalXPositionFromCoord(5),1,gridMapHelper.getGlobalZPositionFromCoord(6)),gridMapHelper.addObstacle(1,9,4,4),gridMapHelper.addObstacle(1,9,6,6);const fireClock=new $4xklQ.Clock,fireHole=new(0,$4BATD.default);function animate(){requestAnimationFrame(animate),fireHole.update(fireClock),controls.update(),renderer.render(scene,camera)}async function andarFrente(e){await(0,$apQQe.translateActorFoward)(actor,e,gridMapHelper,$apQQe.sceneProperties)}async function andarTras(e){await(0,$apQQe.translateActorBackward)(actor,e,gridMapHelper,$apQQe.sceneProperties)}async function girarDireita(){await(0,$apQQe.rotateActorRight)(actor,$apQQe.sceneProperties)}async function girarEsquerda(){await(0,$apQQe.rotateActorLeft)(actor,$apQQe.sceneProperties)}async function darMeiaVolta(){await(0,$apQQe.rotateActorUTurn)(actor,$apQQe.sceneProperties)}function pegandoFogo(){return null!=gridMapHelper.detectHole(actor.position)}function updateExtinguisherUses(){document.getElementById("extinguisherUses").innerText=`x${extinguisherUses}`}function apagarFogo(){extinguisherUses>0?(gridMapHelper.deactivateHole(actor.position,"fire")&&fireHole.setFireVisibility(!1),extinguisherUses--,updateExtinguisherUses()):(0,$apQQe.printOnConsole)("Estou sem extintores!")}function checkCollision(e,t){return gridMapHelper.getXCoordFromGlobalPosition(e.position.x)==gridMapHelper.getXCoordFromGlobalPosition(t.position.x)&&gridMapHelper.getZCoordFromGlobalPosition(e.position.z)==gridMapHelper.getZCoordFromGlobalPosition(t.position.z)}function coletarCristal(){$apQQe.sceneProperties.cancelExecution||(checkCollision(actor,objective)?(objective.visible=!1,(0,$apQQe.printOnConsole)("Cristal coletado com sucesso.")):(0,$apQQe.printOnConsole)("Robô não está sobre o cristal."))}function resetLevel(){extinguisherUses=1,updateExtinguisherUses(),actor.position.set(gridMapHelper.getGlobalXPositionFromCoord(0),1,gridMapHelper.getGlobalZPositionFromCoord(5)),actor.rotation.set(0,(0,$apQQe.degreeToRadians)(90),0),actor.getObjectByName("eve").rotation.set(0,0,0),gridMapHelper.restartHoles(),fireHole.visible=!0,objective.visible=!0}function winCondition(){return!(!checkCollision(actor,objective)||objective.visible)}function badLuck(e){const t=new $4xklQ.Vector3(gridMapHelper.getGlobalXPositionFromCoord(e[0]),0,gridMapHelper.getGlobalZPositionFromCoord(e[1])),r=gridMapHelper.detectHole(t,"fire",!0);null!=r&&(gridMapHelper.fireHoles[r].active=!0,fireHole.visible=!0)}fireHole.position.set(gridMapHelper.getGlobalXPositionFromCoord(7),.1,gridMapHelper.getGlobalZPositionFromCoord(5)),gridMapHelper.addFireHole(7,5),scene.add(ambientLight),scene.add(mainLight),scene.add(plane),scene.add(objective),scene.add(actor),scene.add(box1),scene.add(box2),scene.add(fireHole);const execBtn=document.getElementById("execute");execBtn.addEventListener("click",(async function(){let codeParsed=(0,$hWrQ2.parseCode)($czjZ1.editor.state.doc.toString(),10);$apQQe.sceneProperties.cancelExecution=!1,null!=codeParsed&&(resetLevel(),document.getElementById("execute").disabled=!0,await eval(codeParsed),winCondition()?($czjZ1.readOnlyState.doc=$czjZ1.editor.state.doc,$czjZ1.editor.setState($czjZ1.readOnlyState),document.getElementById("winMessage").classList.remove("invisible"),document.getElementById("advanceBtn").classList.remove("invisible"),document.getElementById("reset").disabled=!0):document.getElementById("execute").disabled=!1)}));const resetBtn=document.getElementById("reset");resetBtn.addEventListener("click",(function(){$apQQe.sceneProperties.cancelExecution=!0,resetLevel()}));const clsConsoleBtn=document.getElementById("clsConsole");clsConsoleBtn.addEventListener("click",(function(){document.getElementById("console-printing").innerHTML=null})),(0,$apQQe.resizeCanvasToDisplaySize)(renderer,camera),updateExtinguisherUses(),animate()})),parcelRequire.register("4BATD",(function(e,t){$parcel$export(e.exports,"default",(()=>a));var r=parcelRequire("4xklQ"),o=parcelRequire("9Rjo8"),i=parcelRequire("9rtWu");class n extends r.Object3D{constructor(){super();const e=new URL(parcelRequire("f323l")).toString(),t=new URL(parcelRequire("4Op5W")).toString();let n=new r.TextureLoader,a=n.load(e),s=n.load(t),l=n.load(t);this.setFilters(a,s,l),s.repeat.set(5,.5),l.repeat.set(1.3,1.3);let c=.15;const p=new r.Mesh(new r.CylinderGeometry(1,1,c,32)),u=new r.Mesh(new r.CylinderGeometry(.8,.8,c,32)),d=i.CSG.fromMesh(p),h=i.CSG.fromMesh(u),f=d.subtract(h),g=i.CSG.toMesh(f,new r.Matrix4);g.material.map=s;const y=new r.RingGeometry(.8,1,64),m=new r.MeshBasicMaterial,v=new r.Mesh(y,m);v.rotateX(-Math.PI/2),v.position.y+=.076,v.material.map=l;const w=new r.Mesh(new r.CylinderGeometry(.8,.8,.2,32)),b=new r.Mesh(new r.CylinderGeometry(.65,.7,.2,32)),x=i.CSG.fromMesh(w),$=i.CSG.fromMesh(b),M=x.subtract($),Q=i.CSG.toMesh(M,new r.Matrix4);return Q.material=new r.MeshLambertMaterial({color:"darkgray"}),this.fire=new(0,o.default)(a),this.fire.scale.set(.9,3,.9),this.fire.position.set(0,1.2,0),this.add(this.fire),this.add(v),this.add(g),this.add(Q),this}setFilters(e,t,o){e.wrapS=t.wrapS=o.wrapS=r.RepeatWrapping,e.wrapT=t.wrapT=o.wrapT=r.RepeatWrapping,e.minFilter=t.minFilter=o.minFilter=r.LinearFilter,e.magFilter=t.magFilter=o.magFilter=r.LinearFilter}update(e){this.fire.update(e)}setFireVisibility(e){this.fire.visible=e}}var a=n})),parcelRequire.register("9rtWu",(function(e,t){$parcel$export(e.exports,"CSG",(()=>o));var r=parcelRequire("4xklQ"),o=function(){function e(){this.polygons=[]}return e.prototype.clone=function(){var t=new e;return t.polygons=this.polygons.map((function(e){return e.clone()})),t},e.prototype.toPolygons=function(){return this.polygons},e.prototype.union=function(t){var r=new p(this.clone().polygons),o=new p(t.clone().polygons);return r.clipTo(o),o.clipTo(r),o.invert(),o.clipTo(r),o.invert(),r.build(o.allPolygons()),e.fromPolygons(r.allPolygons())},e.prototype.subtract=function(t){var r=new p(this.clone().polygons),o=new p(t.clone().polygons);return r.invert(),r.clipTo(o),o.clipTo(r),o.invert(),o.clipTo(r),o.invert(),r.build(o.allPolygons()),r.invert(),e.fromPolygons(r.allPolygons())},e.prototype.intersect=function(t){var r=new p(this.clone().polygons),o=new p(t.clone().polygons);return r.invert(),o.clipTo(r),o.invert(),r.clipTo(o),o.clipTo(r),r.build(o.allPolygons()),r.invert(),e.fromPolygons(r.allPolygons())},e.prototype.inverse=function(){var e=this.clone();return e.polygons.map((function(e){e.flip()})),e},e.fromPolygons=function(t){var r=new e;return r.polygons=t,r},e.fromGeometry=function(t,r){var o,i=[],n=t.attributes.position,a=t.attributes.normal,l=t.attributes.uv,p=t.attributes.color;if(t.index)o=t.index.array;else{o=new Array(n.array.length/n.itemSize|0);for(var u=0;u<o.length;u++)o[u]=u}var d=o.length/3|0;i=new Array(d);u=0;for(var h=0,f=o.length;u<f;u+=3,h++){for(var g=new Array(3),y=0;y<3;y++){var m=o[u+y],v=3*m,w=2*m,b=n.array[v],x=n.array[v+1],$=n.array[v+2],M=a.array[v],Q=a.array[v+1],R=a.array[v+2],P=l.array[w],H=l.array[w+1];g[y]=new s({x:b,y:x,z:$},{x:M,y:Q,z:R},{x:P,y:H,z:0},p&&{x:p.array[w],y:p.array[w+1],z:p.array[w+2]})}i[h]=new c(g,r)}return e.fromPolygons(i)},e.ttvv0=new r.Vector3,e.tmpm3=new r.Matrix3,e.fromMesh=function(t,o){var i=e.fromGeometry(t.geometry,o);e.tmpm3.getNormalMatrix(t.matrix);for(var n=0;n<i.polygons.length;n++)for(var a=i.polygons[n],s=0;s<a.vertices.length;s++){var l=a.vertices[s];l.pos.copy(e.ttvv0.copy(new r.Vector3(l.pos.x,l.pos.y,l.pos.z)).applyMatrix4(t.matrix)),l.normal.copy(e.ttvv0.copy(new r.Vector3(l.normal.x,l.normal.y,l.normal.z)).applyMatrix3(e.tmpm3))}return i},e.nbuf3=function(e){return{top:0,array:new Float32Array(e),write:function(e){this.array[this.top++]=e.x,this.array[this.top++]=e.y,this.array[this.top++]=e.z}}},e.nbuf2=function(e){return{top:0,array:new Float32Array(e),write:function(e){this.array[this.top++]=e.x,this.array[this.top++]=e.y}}},e.toMesh=function(t,o,i){var n,a=t.polygons,s=0;a.forEach((function(e){return s+=e.vertices.length-2})),n=new r.BufferGeometry;var l,c=e.nbuf3(9*s),p=e.nbuf3(9*s),u=e.nbuf2(6*s),d=[];if(a.forEach((function(t){var r=t.vertices,o=r.length;void 0!==t.shared&&(d[t.shared]||(d[t.shared]=[])),o&&void 0!==r[0].color&&(l||(l=e.nbuf3(9*s)));for(var i=3;i<=o;i++)void 0!==t.shared&&d[t.shared].push(c.top/3,c.top/3+1,c.top/3+2),c.write(r[0].pos),c.write(r[i-2].pos),c.write(r[i-1].pos),p.write(r[0].normal),p.write(r[i-2].normal),p.write(r[i-1].normal),u.write(r[0].uv),u.write(r[i-2].uv),u.write(r[i-1].uv),l&&(l.write(r[0].color)||l.write(r[i-2].color)||l.write(r[i-1].color))})),n.setAttribute("position",new r.BufferAttribute(c.array,3)),n.setAttribute("normal",new r.BufferAttribute(p.array,3)),n.setAttribute("uv",new r.BufferAttribute(u.array,2)),l&&n.setAttribute("color",new r.BufferAttribute(l.array,3)),d.length){for(var h=[],f=0,g=0;g<d.length;g++)n.addGroup(f,d[g].length,g),f+=d[g].length,h=h.concat(d[g]);n.setIndex(h)}var y=(new r.Matrix4).copy(o).invert();n.applyMatrix4(y),n.computeBoundingSphere(),n.computeBoundingBox();var m=new r.Mesh(n,i);return m.matrix.copy(o),m.matrix.decompose(m.position,m.quaternion,m.scale),m.rotation.setFromQuaternion(m.quaternion),m.updateMatrixWorld(),m.castShadow=m.receiveShadow=!0,m},e}(),i=function(){function e(e,t,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),this.x=e,this.y=t,this.z=r}return e.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},e.prototype.clone=function(){return new e(this.x,this.y,this.z)},e.prototype.negate=function(){return this.x*=-1,this.y*=-1,this.z*=-1,this},e.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this},e.prototype.sub=function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this},e.prototype.times=function(e){return this.x*=e,this.y*=e,this.z*=e,this},e.prototype.dividedBy=function(e){return this.x/=e,this.y/=e,this.z/=e,this},e.prototype.lerp=function(e,t){return this.add(n.copy(e).sub(this).times(t))},e.prototype.unit=function(){return this.dividedBy(this.length())},e.prototype.length=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2)+Math.pow(this.z,2))},e.prototype.normalize=function(){return this.unit()},e.prototype.cross=function(e){var t=this,r=t.x,o=t.y,i=t.z,n=e.x,a=e.y,s=e.z;return this.x=o*s-i*a,this.y=i*n-r*s,this.z=r*a-o*n,this},e.prototype.dot=function(e){return this.x*e.x+this.y*e.y+this.z*e.z},e}(),n=new i(0,0,0),a=new i(0,0,0),s=function(){function e(e,t,r,o){this.pos=(new i).copy(e),this.normal=(new i).copy(t),this.uv=(new i).copy(r),this.uv.z=0,o&&(this.color=(new i).copy(o))}return e.prototype.clone=function(){return new e(this.pos,this.normal,this.uv,this.color)},e.prototype.flip=function(){this.normal.negate()},e.prototype.interpolate=function(t,r){return new e(this.pos.clone().lerp(t.pos,r),this.normal.clone().lerp(t.normal,r),this.uv.clone().lerp(t.uv,r),this.color&&t.color&&this.color.clone().lerp(t.color,r))},e}(),l=function(){function e(e,t){this.normal=e,this.w=t}return e.prototype.clone=function(){return new e(this.normal.clone(),this.w)},e.prototype.flip=function(){this.normal.negate(),this.w=-this.w},e.prototype.splitPolygon=function(t,r,o,i,a){for(var s=0,l=[],p=0;p<t.vertices.length;p++){var u=(w=this.normal.dot(t.vertices[p].pos)-this.w)<-e.EPSILON?2:w>e.EPSILON?1:0;s|=u,l.push(u)}switch(s){case 0:(this.normal.dot(t.plane.normal)>0?r:o).push(t);break;case 1:i.push(t);break;case 2:a.push(t);break;case 3:var d=[],h=[];for(p=0;p<t.vertices.length;p++){var f=(p+1)%t.vertices.length,g=l[p],y=l[f],m=t.vertices[p],v=t.vertices[f];if(2!=g&&d.push(m),1!=g&&h.push(2!=g?m.clone():m),3==(g|y)){var w=(this.w-this.normal.dot(m.pos))/this.normal.dot(n.copy(v.pos).sub(m.pos)),b=m.interpolate(v,w);d.push(b),h.push(b.clone())}}d.length>=3&&i.push(new c(d,t.shared)),h.length>=3&&a.push(new c(h,t.shared))}},e.EPSILON=1e-5,e.fromPoints=function(t,r,o){var i=n.copy(r).sub(t).cross(a.copy(o).sub(t)).normalize();return new e(i.clone(),i.dot(t))},e}(),c=function(){function e(e,t){this.vertices=e,this.shared=t,this.plane=l.fromPoints(e[0].pos,e[1].pos,e[2].pos)}return e.prototype.clone=function(){return new e(this.vertices.map((function(e){return e.clone()})),this.shared)},e.prototype.flip=function(){this.vertices.reverse().map((function(e){return e.flip()})),this.plane.flip()},e}(),p=function(){function e(e){this.polygons=[],e&&this.build(e)}return e.prototype.clone=function(){var t=new e;return t.plane=this.plane&&this.plane.clone(),t.front=this.front&&this.front.clone(),t.back=this.back&&this.back.clone(),t.polygons=this.polygons.map((function(e){return e.clone()})),t},e.prototype.invert=function(){for(var e=0;e<this.polygons.length;e++)this.polygons[e].flip();this.plane&&this.plane.flip(),this.front&&this.front.invert(),this.back&&this.back.invert();var t=this.front;this.front=this.back,this.back=t},e.prototype.clipPolygons=function(e){if(!this.plane)return e.slice();for(var t=[],r=[],o=0;o<e.length;o++)this.plane.splitPolygon(e[o],t,r,t,r);return this.front&&(t=this.front.clipPolygons(t)),r=this.back?this.back.clipPolygons(r):[],t.concat(r)},e.prototype.clipTo=function(e){this.polygons=e.clipPolygons(this.polygons),this.front&&this.front.clipTo(e),this.back&&this.back.clipTo(e)},e.prototype.allPolygons=function(){var e=this.polygons.slice();return this.front&&(e=e.concat(this.front.allPolygons())),this.back&&(e=e.concat(this.back.allPolygons())),e},e.prototype.build=function(t){if(t.length){this.plane||(this.plane=t[0].plane.clone());for(var r=[],o=[],i=0;i<t.length;i++)this.plane.splitPolygon(t[i],this.polygons,this.polygons,r,o);r.length&&(this.front||(this.front=new e),this.front.build(r)),o.length&&(this.back||(this.back=new e),this.back.build(o))}},e.fromJSON=function(e){return o.fromPolygons(e.polygons.map((function(e){return new c(e.vertices.map((function(e){return new s(e.pos,e.normal,e.uv)})),e.shared)})))},e}()})),parcelRequire.register("f323l",(function(e,t){e.exports=new URL("../../"+parcelRequire("dRo73").resolve("3ogLL"),import.meta.url).toString()})),parcelRequire.register("4Op5W",(function(e,t){e.exports=new URL("../../"+parcelRequire("dRo73").resolve("5js9q"),import.meta.url).toString()})),parcelRequire.register("8jwWx",(function(e,t){e.exports=new URL("../../"+parcelRequire("dRo73").resolve("6UgDP"),import.meta.url).toString()})),parcelRequire.register("kgSYq",(function(e,t){e.exports=new URL("../../"+parcelRequire("dRo73").resolve("2fkcW"),import.meta.url).toString()})),parcelRequire.register("d3NFX",(function(e,t){e.exports=new URL("../../"+parcelRequire("dRo73").resolve("6V1gc"),import.meta.url).toString()}));var $72c727df551e8fe9$exports={};parcelRequire("dRo73").register(JSON.parse('{"jirVQ":"index.b2bb86c5.js","3ogLL":"fire.e7f12c4f.png","5js9q":"stone.33b4a84b.jpg","6UgDP":"eve.1d379c98.glb","2fkcW":"crystal.b012d479.obj","6V1gc":"crystal.0bf41d2e.jpg","7whLb":"index.4b55c743.js","fAugp":"index.1109b307.js"}')),parcelRequire("9MDzx");