function $parcel$export(e,r,t,n){Object.defineProperty(e,r,{get:t,set:n,enumerable:!0,configurable:!0})}var $parcel$global="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},$parcel$modules={},$parcel$inits={},parcelRequire=$parcel$global.parcelRequiredf3e;null==parcelRequire&&(parcelRequire=function(e){if(e in $parcel$modules)return $parcel$modules[e].exports;if(e in $parcel$inits){var r=$parcel$inits[e];delete $parcel$inits[e];var t={id:e,exports:{}};return $parcel$modules[e]=t,r.call(t.exports,t,t.exports),t.exports}var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n},parcelRequire.register=function(e,r){$parcel$inits[e]=r},$parcel$global.parcelRequiredf3e=parcelRequire),parcelRequire.register("dRo73",(function(e,r){var t,n;$parcel$export(e.exports,"register",(()=>t),(e=>t=e)),$parcel$export(e.exports,"resolve",(()=>n),(e=>n=e));var o={};t=function(e){for(var r=Object.keys(e),t=0;t<r.length;t++)o[r[t]]=e[r[t]]},n=function(e){var r=o[e];if(null==r)throw new Error("Could not resolve bundle with id "+e);return r}})),parcelRequire.register("5cRLJ",(function(module,exports){var $4xklQ=parcelRequire("4xklQ"),$6WmIx=parcelRequire("6WmIx"),$9CUYQ=parcelRequire("9CUYQ"),$apQQe=parcelRequire("apQQe"),$czjZ1=parcelRequire("czjZ1"),$hWrQ2=parcelRequire("hWrQ2");const scene=new $4xklQ.Scene,camera=new $4xklQ.PerspectiveCamera(45,2,1,1e3);camera.position.set(0,15,30);const renderer=new $4xklQ.WebGLRenderer({canvas:document.getElementById("sceneView")});window.addEventListener("resize",(function(){(0,$apQQe.resizeCanvasToDisplaySize)(renderer,camera)}),!1);const ambientLight=new $4xklQ.HemisphereLight("white","darkslategrey",.5),mainLight=new $4xklQ.DirectionalLight("white",.7);mainLight.position.set(2,1,1);const controls=new(0,$6WmIx.OrbitControls)(camera,renderer.domElement),gridMapHelper=new(0,$9CUYQ.GridMapHelper),plane=gridMapHelper.createGridPlane();var actorModelPath=new URL(parcelRequire("2xWKH")).toString();const actor=new $4xklQ.Object3D;(0,$apQQe.loadGLBFile)(actor,actorModelPath,"eve",2),actor.position.set(gridMapHelper.getGlobalXPositionFromCoord(0),1,gridMapHelper.getGlobalZPositionFromCoord(5)),actor.rotateY((0,$apQQe.degreeToRadians)(90));const objective=new $4xklQ.Object3D;var crystalModelPath=new URL(parcelRequire("kerhF")).toString(),crystalTexturePath=new URL(parcelRequire("8HTal")).toString();function animate(){requestAnimationFrame(animate),controls.update(),renderer.render(scene,camera)}async function andarFrente(e){await(0,$apQQe.translateActorFoward)(actor,e,gridMapHelper,$apQQe.sceneProperties)}async function andarTras(e){await(0,$apQQe.translateActorBackward)(actor,e,gridMapHelper,$apQQe.sceneProperties)}async function girarDireita(){await(0,$apQQe.rotateActorRight)(actor,$apQQe.sceneProperties)}async function girarEsquerda(){await(0,$apQQe.rotateActorLeft)(actor,$apQQe.sceneProperties)}function checkCollision(e,r){return gridMapHelper.getXCoordFromGlobalPosition(e.position.x)==gridMapHelper.getXCoordFromGlobalPosition(r.position.x)&&gridMapHelper.getZCoordFromGlobalPosition(e.position.z)==gridMapHelper.getZCoordFromGlobalPosition(r.position.z)}function coletarCristal(){$apQQe.sceneProperties.cancelExecution||(checkCollision(actor,objective)?(objective.visible=!1,(0,$apQQe.printOnConsole)("Cristal coletado com sucesso.")):(0,$apQQe.printOnConsole)("Robô não está sobre o cristal."))}function resetLevel(){actor.position.set(gridMapHelper.getGlobalXPositionFromCoord(0),1,gridMapHelper.getGlobalZPositionFromCoord(5)),actor.rotation.set(0,(0,$apQQe.degreeToRadians)(90),0),actor.getObjectByName("eve").rotation.set(0,0,0),objective.visible=!0}function winCondition(){return!(!checkCollision(actor,objective)||objective.visible)}(0,$apQQe.loadOBJFile)(objective,crystalModelPath,"crystal",crystalTexturePath,2),objective.rotateX((0,$apQQe.degreeToRadians)(-90)),objective.position.set(gridMapHelper.getGlobalXPositionFromCoord(9),0,gridMapHelper.getGlobalZPositionFromCoord(5)),scene.add(ambientLight),scene.add(mainLight),scene.add(plane),scene.add(objective),scene.add(actor);const execBtn=document.getElementById("execute");execBtn.addEventListener("click",(async function(){let codeParsed=(0,$hWrQ2.parseCode)($czjZ1.editor.state.doc.toString(),10);$apQQe.sceneProperties.cancelExecution=!1,null!=codeParsed&&(resetLevel(),document.getElementById("execute").disabled=!0,await eval(codeParsed),winCondition()?($czjZ1.readOnlyState.doc=$czjZ1.editor.state.doc,$czjZ1.editor.setState($czjZ1.readOnlyState),document.getElementById("winMessage").classList.remove("invisible"),document.getElementById("advanceBtn").classList.remove("invisible"),document.getElementById("reset").disabled=!0):document.getElementById("execute").disabled=!1)}));const resetBtn=document.getElementById("reset");resetBtn.addEventListener("click",(function(){$apQQe.sceneProperties.cancelExecution=!0,resetLevel()}));const clsConsoleBtn=document.getElementById("clsConsole");clsConsoleBtn.addEventListener("click",(function(){document.getElementById("console-printing").innerHTML=null})),(0,$apQQe.resizeCanvasToDisplaySize)(renderer,camera),animate()})),parcelRequire.register("hWrQ2",(function(e,r){$parcel$export(e.exports,"parseCode",(()=>c));var t=parcelRequire("apQQe");const n=[{filter:new RegExp("^andarFrente(\\s+)?\\((\\s+)?\\d+(\\s+)?\\)(\\s+)?(;)?$"),type:"sequential"},{filter:new RegExp("^andarTras(\\s+)?\\((\\s+)?\\d+(\\s+)?\\)(\\s+)?(;)?$"),type:"sequential"},{filter:new RegExp("^girarEsquerda(\\s+)?\\((\\s+)?\\)(\\s+)?(;)?$"),type:"sequential"},{filter:new RegExp("^girarDireita(\\s+)?\\((\\s+)?\\)(\\s+)?(;)?$"),type:"sequential"},{filter:new RegExp("^coletarCristal(\\s+)?\\((\\s+)?\\)(\\s+)?(;)?$"),type:"normal"},{filter:new RegExp("^se(\\s+)?\\((\\s+)?.+\\)$"),type:"conditional"},{filter:new RegExp("^se(\\s+)?\\((\\s+)?.+\\)(\\s+)?{$"),type:"conditional&&blockValidation"},{filter:new RegExp("^senao$"),type:"elseValidation"},{filter:new RegExp("^senao(\\s+)?{$"),type:"elseValidation&&blockValidation"},{filter:new RegExp("^}$"),type:"closeBlockValidation"},{filter:new RegExp("^{$"),type:"blockValidation"}],o=[new RegExp("true"),new RegExp("false")];function i(e){let r=e.trim(),t=e.substring(r.indexOf("(")+1,r.lastIndexOf(")"));for(let e=0;e<o.length;e++)if(o[e].test(t.trim()))return!0;return!1}function a(e,r){let t=!1,n=0;for(let o=r+1;o<e.length;o++)if(e[o].includes("}")){if(0==n){t=!0;break}n--}else{if(!e[o].includes("{"))continue;n++}return t}function l(e,r){let t=!1;for(let n=r-1;n>=0;n--)if(e[n].includes("{")){t=!0;break}return t}function s(e,r){let t=!1,n=new RegExp("^se(\\s+)?\\((\\s+)?.+\\)(\\s+)?.+(\\s+)?$"),o=new RegExp("^se(\\s+)?\\((\\s+)?.+\\)$"),i=new RegExp("^se(\\s+)?\\((\\s+)?.+\\)(\\s+)?{[^]*?}$"),a=new RegExp("^se(\\s+)?\\((\\s+)?.+\\)(\\s+)?{$"),l=null;for(let t=r-1;t>=0;t--)if(o.test(e[t].trim())||a.test(e[t].trim())){l=t;break}if(null!=l){let o="";for(let t=l;t<r;t++)o+=`${e[t].trim()}`;return n.test(o.trim())||i.test(o.trim())?(t=!0,t):t}return t}function c(e,r=0){let o="async function runCode(){\n",c=e.split("\n"),d=!0,p=0;for(let e=0;e<c.length;e++){let u,f=!1;if(""!=c[e].trim()){for(let r=0;r<n.length;r++)if(f=n[r].filter.test(c[e].trim()),f){u=n[r].type;break}if(!f){(0,t.printErrorOnConsole)(c[e],e+1),d=!1;break}if("sequential"===u){o+=`await ${c[e].trim()}\n`,p++}else if("conditional&&blockValidation"===u){let r=!1;if(a(c,e)?i(c[e])?r=!0:(0,t.printErrorOnConsole)(`${c[e]} (Condição inválida)`,e+1):(0,t.printErrorOnConsole)(`${c[e]} (Bloco é aberto mas nunca é fechado)`,e+1),!r){d=!1;break}{let r=c[e].trim();o+=`if${r.substring(r.indexOf("("))}\n`,p++}}else if("conditional"===u){if(!i(c[e])){(0,t.printErrorOnConsole)(`${c[e]} (Condição inválida)`,e+1),d=!1;break}{let r=c[e].trim();o+=`if${r.substring(r.indexOf("("))}\n`,p++}}else if("elseValidation"===u){if(!s(c,e)){(0,t.printErrorOnConsole)(`${c[e]} (Condição inválida)`,e+1),d=!1;break}o+="else\n",p++}else if("elseValidation&&blockValidation"===u){let r=!1;if(a(c,e)?s(c,e)?r=!0:(0,t.printErrorOnConsole)(`${c[e]} (Condição inválida)`,e+1):(0,t.printErrorOnConsole)(`${c[e]} (Bloco é aberto mas nunca é fechado)`,e+1),!r){d=!1;break}o+="else{\n",p++}else if("blockValidation"===u){if(!a(c,e)){(0,t.printErrorOnConsole)(`${c[e]} (Bloco é aberto mas nunca é fechado)`,e+1),d=!1;break}o+=`${c[e].trim()}\n`,p++}else if("closeBlockValidation"===u){if(!l(c,e)){(0,t.printErrorOnConsole)(`${c[e]} (Bloco é fechado mas nunca é aberto)`,e+1),d=!1;break}o+=`${c[e].trim()}\n`,p++}else{o+=`${c[e].trim()}\n`,p++}if(r>0&&p>r){(0,t.printOnConsole)(`O código tem mais linhas do que o robô pode processar. Tente rescrever seu código em ${r} linhas ou menos.`),d=!1;break}}}return d?(o+="}\nrunCode()",o):null}})),parcelRequire.register("2xWKH",(function(e,r){e.exports=new URL("../"+parcelRequire("dRo73").resolve("6UgDP"),import.meta.url).toString()})),parcelRequire.register("kerhF",(function(e,r){e.exports=new URL("../"+parcelRequire("dRo73").resolve("2fkcW"),import.meta.url).toString()})),parcelRequire.register("8HTal",(function(e,r){e.exports=new URL("../"+parcelRequire("dRo73").resolve("6V1gc"),import.meta.url).toString()}));var $73ae6aeae4a9375e$exports={};parcelRequire("dRo73").register(JSON.parse('{"5r19o":"index.82bc4071.js","6UgDP":"eve.1d379c98.glb","2fkcW":"crystal.b012d479.obj","6V1gc":"crystal.0bf41d2e.jpg","bkl38":"index.ea36cd8f.js"}')),parcelRequire("5cRLJ");